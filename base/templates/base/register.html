
{% extends "base/base.html" %}
{% load static %}

{% block content %}
<div class="d-flex align-items-center">
    <div class="mx-auto col-10 col-md-8 col-lg-6">
        <form class="row g-3" action="{% url 'register' %}" method="POST" enctype="multipart/form-data" id= "my-form">
            <h2>Register Account</h2>
            {% csrf_token %}
            <br>
            {% if messages %}
            <ul class="messages">
            {% for message in messages %}
            <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
            </ul>
            {% endif %}
            <br>
                    <div class="col-md-4">
                        <label for="firstname" class="form-label">Firstname</label>
                        <input type="text" class="form-control" id="firstname" name="firstname" placeholder="Firstname" required/>
                        <div class="error"></div>
                    </div>
                      <div class="col-md-4">
                        <label for="lastname" class="form-label">Lastname</label>
                        <input type="text" class="form-control" id="lastname" name="lastname" placeholder="Lastname" required/>
                        <div class="error"></div>
                      </div>

                    <div class="col-md-4">
                        <label for="sex" class="form-label">Gender</label><br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="gender" id="male" value="Male" required>
                            <label class="form-check-label" for="male">Male</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="gender" id="female" value="Female" required>
                            <label class="form-check-label" for="female">Female</label>
                        </div>
                        <label id="gender-label" ></label>
                    </div>
                    <div class="error"></div>
                    <div class="col-md-4">
                        <label for="dob" class="form-label">Date of Birth</label>
                        <input type="date" class="form-control" id="dob" name="dob"  required/>
                    </div>
                    <div class="col-md-4">
                        <label for="mobile" class="form-label">Mobile Number</label>
                        <input type="number" class="form-control" id="mobile" name="mobile" placeholder="+69XXXXXXXXXX" required/>
                        <div class="error"></div>
                    </div>
                    <div class="col-md-4">
                        <label for="emailaddress" class="form-label">Email Address</label>
                        <input type="email" class="form-control" id="emailaddress" name="emailaddress" placeholder="beautyki@gmail.com" required/>
                        <div class="error"></div>
                    </div>
                    <div class="col-md-6">
                        <label for="address" class="form-label">Address</label>
                        <input type="text" class="form-control" id="address" name="address" placeholder="Street/Barangay/Municipality/Province" required/>
                        <div class="error"></div>
                      </div>
                    <div class="col-md-6">
                        <label for="imagefile" class="form-label">Upload Image</label>
                        <input type="file" class="form-control" id="imagefile" name="imagefile" placeholder=""  accept="image/*" required/>
                        <div class="error"></div>
                    </div>
                    <div class="col-12">
                        <a href="{% url 'viewaccount' %}" class="btn btn-primary" style="margin-right:5px">Back</a>
                        <button type="submit" class="btn btn-primary">Register</button>
                    </div>
        </form>
    </div>
</div>
<script src="{% static 'scripts/required_validation.js' %}"></script>
<script>
    $(document).ready(function() {
        $("#my_form").submit(function(event) {
            event.preventDefault();  // Prevent the default form submission

            // Serialize form data
            var formData = $(this).serialize();

            $.ajax({
                type: 'POST',
                url: '/register',  // Adjust the URL to match your Django view
                data: formData,
                dataType: 'json',
                success: function(data) {
                    console.log(data);
                },
                error: function(xhr, status, error) {
                    console.error(xhr.responseText);
                }
            });
        });
    });
</script>
{% endblock content %}